@startuml
actor Client

Client -> EndpointController : GET /endpoint?train_station={station}&day={day}&country={country}
activate EndpointController

EndpointController -> PDFFetcher : fetch_pdf(country, train_station, day)
activate PDFFetcher

PDFFetcher -> ExternalAPI : GET /api/stationboard/{country}/{station}?date={day}
activate ExternalAPI
ExternalAPI --> PDFFetcher : PDF string (str)
deactivate ExternalAPI

PDFFetcher --> EndpointController : PDF string (str)
deactivate PDFFetcher

EndpointController -> OCRProcessor : extract_text(pdf_str)
activate OCRProcessor

OCRProcessor -> pdftotext : Execute "pdftotext -layout"
activate pdftotext
pdftotext --> OCRProcessor : Extracted raw text
deactivate pdftotext

OCRProcessor --> EndpointController : Raw text
deactivate OCRProcessor

EndpointController -> JSONFormatter : format(raw_text)
activate JSONFormatter
JSONFormatter --> EndpointController : JSON array
deactivate JSONFormatter

EndpointController --> Client : JSON response
deactivate EndpointController
@enduml
