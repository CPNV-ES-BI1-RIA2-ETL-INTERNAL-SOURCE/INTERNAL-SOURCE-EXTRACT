@startuml
actor Client

Client -> EndpointController : GET /endpoint?file={file_url}&status={status}&validity_duration={seconds}
activate EndpointController

EndpointController -> PDFFetcher : fetch_pdf(url)
activate PDFFetcher

PDFFetcher -> ExternalAPI : GET {url} (PDF file on any web server)
activate ExternalAPI
ExternalAPI --> PDFFetcher : PDF string (str)
deactivate ExternalAPI

PDFFetcher --> EndpointController : PDF string (str)
deactivate PDFFetcher

EndpointController -> OCRProcessor : extract_text(pdf_str)
activate OCRProcessor

OCRProcessor -> pdftotext : Execute "pdftotext -layout"
activate pdftotext
pdftotext --> OCRProcessor : Extracted raw text
deactivate pdftotext

OCRProcessor --> EndpointController : Raw text
deactivate OCRProcessor

EndpointController -> JSONFormatter : format(raw_text)
activate JSONFormatter
JSONFormatter --> EndpointController : JSON array
deactivate JSONFormatter

EndpointController --> Client : JSON response
deactivate EndpointController
@enduml
